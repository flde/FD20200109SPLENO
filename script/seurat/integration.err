[NbConvertApp] Converting notebook integration.r.ipynb to html
Traceback (most recent call last):
  File "/home/fdeckert/bin/miniconda3/bin/jupyter-nbconvert", line 11, in <module>
    sys.exit(main())
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/jupyter_core/application.py", line 264, in launch_instance
    return super(JupyterApp, cls).launch_instance(argv=argv, **kwargs)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/traitlets/config/application.py", line 846, in launch_instance
    app.start()
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/nbconvertapp.py", line 346, in start
    self.convert_notebooks()
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/nbconvertapp.py", line 518, in convert_notebooks
    self.convert_single_notebook(notebook_filename)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/nbconvertapp.py", line 483, in convert_single_notebook
    output, resources = self.export_single_notebook(notebook_filename, resources, input_buffer=input_buffer)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/nbconvertapp.py", line 412, in export_single_notebook
    output, resources = self.exporter.from_filename(notebook_filename, resources=resources)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/exporters/exporter.py", line 181, in from_filename
    return self.from_file(f, resources=resources, **kw)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/exporters/exporter.py", line 199, in from_file
    return self.from_notebook_node(nbformat.read(file_stream, as_version=4), resources=resources, **kw)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/exporters/html.py", line 129, in from_notebook_node
    return super().from_notebook_node(nb, resources, **kw)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/exporters/templateexporter.py", line 374, in from_notebook_node
    nb_copy, resources = super().from_notebook_node(nb, resources, **kw)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/exporters/exporter.py", line 143, in from_notebook_node
    nb_copy, resources = self._preprocess(nb_copy, resources)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/exporters/exporter.py", line 318, in _preprocess
    nbc, resc = preprocessor(nbc, resc)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/preprocessors/base.py", line 47, in __call__
    return self.preprocess(nb, resources)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/preprocessors/execute.py", line 84, in preprocess
    self.preprocess_cell(cell, resources, index)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbconvert/preprocessors/execute.py", line 105, in preprocess_cell
    cell = self.execute_cell(cell, index, store_history=True)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbclient/util.py", line 74, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbclient/util.py", line 53, in just_run
    return loop.run_until_complete(coro)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/asyncio/base_events.py", line 616, in run_until_complete
    return future.result()
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbclient/client.py", line 857, in async_execute_cell
    self._check_raise_for_error(cell, exec_reply)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/site-packages/nbclient/client.py", line 760, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
integration_features <- SelectIntegrationFeatures(object.list=so, nfeatures=3000, verbose=FALSE)
so <- PrepSCTIntegration(object.list=so, anchor.features=integration_features, verbose=FALSE)
anchors <- FindIntegrationAnchors(object.list=so, normalization.method="SCT", anchor.features=integration_features, verbose=FALSE)
so_int <- IntegrateData(anchorset=anchors, normalization.method="SCT", verbose=FALSE)
------------------

Error in getGlobalsAndPackages(expr, envir = envir, globals = globals): The total size of the 7 globals exported for future expression (‘FUN()’) is 2.13 GiB.. This exceeds the maximum allowed size of 500.00 MiB (option 'future.globals.maxSize'). The three largest globals are ‘object.list’ (2.13 GiB of class ‘list’), ‘anchor.features’ (189.30 KiB of class ‘character’) and ‘FUN’ (35.52 KiB of class ‘function’)
Traceback:

1. PrepSCTIntegration(object.list = so, anchor.features = integration_features, 
 .     verbose = FALSE)
2. my.lapply(X = 1:length(x = object.list), FUN = function(i) {
 .     obj <- GetResidual(object = object.list[[i]], assay = assay[i], 
 .         features = anchor.features, replace.value = ifelse(test = is.null(x = sct.clip.range), 
 .             yes = FALSE, no = TRUE), clip.range = sct.clip.range, 
 .         verbose = FALSE)
 .     scale.data <- GetAssayData(object = obj, assay = assay[i], 
 .         slot = "scale.data")
 .     obj <- SetAssayData(object = obj, slot = "scale.data", new.data = scale.data[anchor.features, 
 .         ], assay = assay[i])
 .     return(obj)
 . })
3. future_xapply(FUN = FUN, nX = nX, chunk_args = X, args = list(...), 
 .     get_chunk = `[`, expr = expr, envir = envir, future.envir = future.envir, 
 .     future.globals = future.globals, future.packages = future.packages, 
 .     future.scheduling = future.scheduling, future.chunk.size = future.chunk.size, 
 .     future.stdout = future.stdout, future.conditions = future.conditions, 
 .     future.seed = future.seed, future.lazy = future.lazy, future.label = future.label, 
 .     fcn_name = fcn_name, args_name = args_name, debug = debug)
4. getGlobalsAndPackagesXApply(FUN = FUN, args = args, MoreArgs = MoreArgs, 
 .     envir = envir, future.globals = future.globals, future.packages = future.packages, 
 .     debug = debug)
5. getGlobalsAndPackages(expr, envir = envir, globals = globals)
6. stop(msg)
ERROR: Error in getGlobalsAndPackages(expr, envir = envir, globals = globals): The total size of the 7 globals exported for future expression (‘FUN()’) is 2.13 GiB.. This exceeds the maximum allowed size of 500.00 MiB (option 'future.globals.maxSize'). The three largest globals are ‘object.list’ (2.13 GiB of class ‘list’), ‘anchor.features’ (189.30 KiB of class ‘character’) and ‘FUN’ (35.52 KiB of class ‘function’)


Exception ignored in: <function BaseEventLoop.__del__ at 0x2aaab3435040>
Traceback (most recent call last):
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/asyncio/base_events.py", line 656, in __del__
    self.close()
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/asyncio/unix_events.py", line 58, in close
    super().close()
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/asyncio/selector_events.py", line 92, in close
    self._close_self_pipe()
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/asyncio/selector_events.py", line 99, in _close_self_pipe
    self._remove_reader(self._ssock.fileno())
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/asyncio/selector_events.py", line 274, in _remove_reader
    key = self._selector.get_key(fd)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/selectors.py", line 190, in get_key
    return mapping[fileobj]
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/selectors.py", line 71, in __getitem__
    fd = self._selector._fileobj_lookup(fileobj)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/selectors.py", line 225, in _fileobj_lookup
    return _fileobj_to_fd(fileobj)
  File "/home/fdeckert/bin/miniconda3/lib/python3.8/selectors.py", line 42, in _fileobj_to_fd
    raise ValueError("Invalid file descriptor: {}".format(fd))
ValueError: Invalid file descriptor: -1
